{"ast":null,"code":"import _objectSpread from\"/Users/MarissaGvozdenovich/Desktop/BarFile/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/MarissaGvozdenovich/Desktop/BarFile/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,Suspense}from'react';import Navbar from'./Navbar';import{useDispatch,useSelector}from'react-redux';import{useHistory}from'react-router-dom';import{createSettings,editSettings,deleteSetting}from'../actions/settings';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CurrentSettings=/*#__PURE__*/React.lazy(function(){return import('./CurrentSettings');});function Settings(){//set variables\nvar user=JSON.parse(localStorage.getItem('profile'));var dispatch=useDispatch();var history=useHistory();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),width=_useState2[0],setWidth=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),settingData=_useState6[0],setSettingData=_useState6[1];var settings=useSelector(function(state){return state.settings.filter(function(s){var _user$result,_user$result2;return(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.googleId)===(s===null||s===void 0?void 0:s.creator)||(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2._id)===(s===null||s===void 0?void 0:s.creator);});});//set loading screen\nuseEffect(function(){setTimeout(function(){return setLoading(false);},2000);setTimeout(function(){return setWidth(window.innerWidth);},4000);},[]);//state to gather settings data\nuseEffect(function(){var timeOut=setTimeout(function(){var _user$result3,_user$result4,_user$result5,_settings$,_settings$2,_settings$3;return setSettingData({nameOfUser:user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name,creator:(user===null||user===void 0?void 0:(_user$result4=user.result)===null||_user$result4===void 0?void 0:_user$result4.googleId)||(user===null||user===void 0?void 0:(_user$result5=user.result)===null||_user$result5===void 0?void 0:_user$result5._id),createdAt:new Date().toDateString(),distributers:(_settings$=settings[0])===null||_settings$===void 0?void 0:_settings$.distributers,categories:(_settings$2=settings[0])===null||_settings$2===void 0?void 0:_settings$2.categories,threshold:(_settings$3=settings[0])===null||_settings$3===void 0?void 0:_settings$3.threshold});},1000);return function(){clearTimeout(timeOut);};},[loading]);//save user setting input\nvar saveSettings=function saveSettings(e){e.preventDefault();if(settings.length>0){dispatch(editSettings(settings[0]._id,_objectSpread({},settingData)));alert('Settings saved!');history.push('/settings');}else{dispatch(createSettings({settingData:settingData}));alert('Settings saved!');history.push('/settings');}};//clear user's settings completely\nvar clearSettings=function clearSettings(){if(settings.length>0){var _settings$4;dispatch(deleteSetting((_settings$4=settings[0])===null||_settings$4===void 0?void 0:_settings$4._id));setSettingData({});alert('Settings cleared!');}else{alert('No settings created yet.');}};return/*#__PURE__*/_jsx(_Fragment,{children:loading===false?/*#__PURE__*/_jsx(_Fragment,{children:width>=1000?/*#__PURE__*/_jsx(\"div\",{className:\"settings-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"nav-section\",className:\"col-3\",children:/*#__PURE__*/_jsx(Navbar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-9\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"dash-heading\",children:\"Settings\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"dash-line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"take-inventory\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"How will BarFile work for you?\"}),/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Settings...\"}),children:/*#__PURE__*/_jsx(CurrentSettings,{settings:settings})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:saveSettings,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"distributers\",children:[\"What \",/*#__PURE__*/_jsx(\"b\",{children:\"distributers\"}),\" do you use to stock your bar? List them separated by commas.\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"distributers\",id:\"settings-textarea\",cols:\"30\",rows:\"5\",placeholder:\"...\",value:settingData.distributers,onChange:function onChange(e){return setSettingData(_objectSpread(_objectSpread({},settingData),{},{distributers:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"threshold\",children:[\"What \",/*#__PURE__*/_jsx(\"b\",{children:\"threshold\"}),\" would you like to use to indicate when it's time to reorder? (i.e. reorder when inventory for an item is 0.3 or less)\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"threshold-input\",type:\"text\",name:\"threshold\",id:\"settings-textarea\",placeholder:\"...\",value:settingData.threshold,onChange:function onChange(e){return setSettingData(_objectSpread(_objectSpread({},settingData),{},{threshold:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"categories\",children:[\"What \",/*#__PURE__*/_jsx(\"b\",{children:\"categories\"}),\" would you like to use to organize items for your bar? List them separated by commas.\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"categories\",id:\"settings-textarea\",cols:\"30\",rows:\"5\",placeholder:\"...\",value:settingData.categories,onChange:function onChange(e){return setSettingData(_objectSpread(_objectSpread({},settingData),{},{categories:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"settings-button-desktop\",type:\"submit\",children:\"Save Settings\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"settings-button-desktop\",id:\"clear-settings-btn\",onClick:function onClick(e){e.preventDefault();clearSettings();window.location.reload();},children:\"Clear All Settings\"})]})]})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"take-inventory\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"dash-heading-m\",children:\"Settings\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"dash-line-m\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"How will BarFile work for you?\"}),/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Settings...\"}),children:/*#__PURE__*/_jsx(CurrentSettings,{settings:settings})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:saveSettings,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"distributers\",children:[\"What \",/*#__PURE__*/_jsx(\"b\",{children:\"distributers\"}),\" do you use to stock your bar? List them separated by commas.\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"distributers\",id:\"settings-textarea\",cols:\"30\",rows:\"5\",placeholder:\"...\",value:settingData.distributers,onChange:function onChange(e){return setSettingData(_objectSpread(_objectSpread({},settingData),{},{distributers:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"threshold\",children:[\"What \",/*#__PURE__*/_jsx(\"b\",{children:\"threshold\"}),\" would you like to use to indicate when it's time to reorder? (i.e. reorder when inventory for an item is 0.3 or less)\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"threshold-input\",type:\"text\",name:\"threshold\",id:\"settings-textarea\",placeholder:\"...\",value:settingData.threshold,onChange:function onChange(e){return setSettingData(_objectSpread(_objectSpread({},settingData),{},{threshold:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"categories\",children:[\"What \",/*#__PURE__*/_jsx(\"b\",{children:\"categories\"}),\" would you like to use to organize items for your bar? List them separated by commas.\"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{name:\"categories\",id:\"settings-textarea\",cols:\"30\",rows:\"5\",placeholder:\"...\",value:settingData.categories,onChange:function onChange(e){return setSettingData(_objectSpread(_objectSpread({},settingData),{},{categories:e.target.value}));}}),/*#__PURE__*/_jsx(\"button\",{className:\"settings-button\",type:\"submit\",children:\"Save Settings\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"settings-button\",id:\"clear-settings-btn-m\",onClick:function onClick(){var _settings$5;dispatch(deleteSetting((_settings$5=settings[0])===null||_settings$5===void 0?void 0:_settings$5._id)).then(function(){setSettingData({});alert('Settings cleared!');}).then(function(){return window.location.reload();});},children:\"Clear All Settings\"})]})]})]})}):/*#__PURE__*/_jsx(Loading,{})});}export default Settings;","map":{"version":3,"sources":["/Users/MarissaGvozdenovich/Desktop/BarFile/client/src/components/Settings.js"],"names":["React","useState","useEffect","Suspense","Navbar","useDispatch","useSelector","useHistory","createSettings","editSettings","deleteSetting","Loading","CurrentSettings","lazy","Settings","user","JSON","parse","localStorage","getItem","dispatch","history","width","setWidth","loading","setLoading","settingData","setSettingData","settings","state","filter","s","result","googleId","creator","_id","setTimeout","window","innerWidth","timeOut","nameOfUser","name","createdAt","Date","toDateString","distributers","categories","threshold","clearTimeout","saveSettings","e","preventDefault","length","alert","push","clearSettings","target","value","location","reload","then"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Suspense } from 'react';\nimport Navbar from './Navbar';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport {\n\tcreateSettings,\n\teditSettings,\n\tdeleteSetting,\n} from '../actions/settings';\nimport Loading from './Loading';\nconst CurrentSettings = React.lazy(() => import('./CurrentSettings'));\n\nfunction Settings() {\n\t//set variables\n\tconst user = JSON.parse(localStorage.getItem('profile'));\n\tconst dispatch = useDispatch();\n\tconst history = useHistory();\n\tconst [width, setWidth] = useState(0);\n\tconst [loading, setLoading] = useState(true);\n\tconst [settingData, setSettingData] = useState({});\n\tconst settings = useSelector((state) =>\n\t\tstate.settings.filter(\n\t\t\t(s) =>\n\t\t\t\tuser?.result?.googleId === s?.creator ||\n\t\t\t\tuser?.result?._id === s?.creator,\n\t\t),\n\t);\n\n\t//set loading screen\n\tuseEffect(() => {\n\t\tsetTimeout(() => setLoading(false), 2000);\n\t\tsetTimeout(() => setWidth(window.innerWidth), 4000);\n\t}, []);\n\n\t//state to gather settings data\n\tuseEffect(() => {\n\t\tvar timeOut = setTimeout(\n\t\t\t() =>\n\t\t\t\tsetSettingData({\n\t\t\t\t\tnameOfUser: user?.result?.name,\n\t\t\t\t\tcreator: user?.result?.googleId || user?.result?._id,\n\t\t\t\t\tcreatedAt: new Date().toDateString(),\n\t\t\t\t\tdistributers: settings[0]?.distributers,\n\t\t\t\t\tcategories: settings[0]?.categories,\n\t\t\t\t\tthreshold: settings[0]?.threshold,\n\t\t\t\t}),\n\t\t\t1000,\n\t\t);\n\t\treturn () => {\n\t\t\tclearTimeout(timeOut);\n\t\t};\n\t}, [loading]);\n\n\t//save user setting input\n\tconst saveSettings = (e) => {\n\t\te.preventDefault();\n\t\tif (settings.length > 0) {\n\t\t\tdispatch(\n\t\t\t\teditSettings(settings[0]._id, {\n\t\t\t\t\t...settingData,\n\t\t\t\t}),\n\t\t\t);\n\t\t\talert('Settings saved!');\n\t\t\thistory.push('/settings');\n\t\t} else {\n\t\t\tdispatch(\n\t\t\t\tcreateSettings({\n\t\t\t\t\tsettingData,\n\t\t\t\t}),\n\t\t\t);\n\t\t\talert('Settings saved!');\n\t\t\thistory.push('/settings');\n\t\t}\n\t};\n\n\t//clear user's settings completely\n\tconst clearSettings = () => {\n\t\tif (settings.length > 0) {\n\t\t\tdispatch(deleteSetting(settings[0]?._id));\n\t\t\tsetSettingData({});\n\t\t\talert('Settings cleared!');\n\t\t} else {\n\t\t\talert('No settings created yet.');\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{loading === false ? (\n\t\t\t\t<>\n\t\t\t\t\t{width >= 1000 ? (\n\t\t\t\t\t\t<div className='settings-container'>\n\t\t\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t\t\t<div id='nav-section' className='col-3'>\n\t\t\t\t\t\t\t\t\t<Navbar />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='col-9'>\n\t\t\t\t\t\t\t\t\t<h1 className='dash-heading'>Settings</h1>\n\t\t\t\t\t\t\t\t\t<hr className='dash-line' />\n\t\t\t\t\t\t\t\t\t<div className='take-inventory'>\n\t\t\t\t\t\t\t\t\t\t<h3>How will BarFile work for you?</h3>\n\t\t\t\t\t\t\t\t\t\t<Suspense\n\t\t\t\t\t\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t\t\t\t\t\t<div>Loading Settings...</div>\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<CurrentSettings\n\t\t\t\t\t\t\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t\t\t<form onSubmit={saveSettings}>\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor='distributers'>\n\t\t\t\t\t\t\t\t\t\t\t\tWhat <b>distributers</b> do you\n\t\t\t\t\t\t\t\t\t\t\t\tuse to stock your bar? List them\n\t\t\t\t\t\t\t\t\t\t\t\tseparated by commas.\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\t\tname='distributers'\n\t\t\t\t\t\t\t\t\t\t\t\tid='settings-textarea'\n\t\t\t\t\t\t\t\t\t\t\t\tcols='30'\n\t\t\t\t\t\t\t\t\t\t\t\trows='5'\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='...'\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={settingData.distributers}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettingData({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...settingData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdistributers:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor='threshold'>\n\t\t\t\t\t\t\t\t\t\t\t\tWhat <b>threshold</b> would you\n\t\t\t\t\t\t\t\t\t\t\t\tlike to use to indicate when\n\t\t\t\t\t\t\t\t\t\t\t\tit's time to reorder? (i.e.\n\t\t\t\t\t\t\t\t\t\t\t\treorder when inventory for an\n\t\t\t\t\t\t\t\t\t\t\t\titem is 0.3 or less)\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='threshold-input'\n\t\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\t\tname='threshold'\n\t\t\t\t\t\t\t\t\t\t\t\tid='settings-textarea'\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='...'\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={settingData.threshold}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettingData({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...settingData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthreshold:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor='categories'>\n\t\t\t\t\t\t\t\t\t\t\t\tWhat <b>categories</b> would you\n\t\t\t\t\t\t\t\t\t\t\t\tlike to use to organize items\n\t\t\t\t\t\t\t\t\t\t\t\tfor your bar? List them\n\t\t\t\t\t\t\t\t\t\t\t\tseparated by commas.\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\t\tname='categories'\n\t\t\t\t\t\t\t\t\t\t\t\tid='settings-textarea'\n\t\t\t\t\t\t\t\t\t\t\t\tcols='30'\n\t\t\t\t\t\t\t\t\t\t\t\trows='5'\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='...'\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={settingData.categories}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettingData({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...settingData,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcategories:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='settings-button-desktop'\n\t\t\t\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tSave Settings\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='settings-button-desktop'\n\t\t\t\t\t\t\t\t\t\t\tid='clear-settings-btn'\n\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\t\t\t\t\tclearSettings();\n\t\t\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tClear All Settings\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Navbar />\n\t\t\t\t\t\t\t<div className='take-inventory'>\n\t\t\t\t\t\t\t\t<h1 className='dash-heading-m'>Settings</h1>\n\t\t\t\t\t\t\t\t<hr className='dash-line-m' />\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h3>How will BarFile work for you?</h3>\n\t\t\t\t\t\t\t\t\t<Suspense\n\t\t\t\t\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t\t\t\t\t<div>Loading Settings...</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<CurrentSettings settings={settings} />\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t\t<form onSubmit={saveSettings}>\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='distributers'>\n\t\t\t\t\t\t\t\t\t\t\tWhat <b>distributers</b> do you use\n\t\t\t\t\t\t\t\t\t\t\tto stock your bar? List them\n\t\t\t\t\t\t\t\t\t\t\tseparated by commas.\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tname='distributers'\n\t\t\t\t\t\t\t\t\t\t\tid='settings-textarea'\n\t\t\t\t\t\t\t\t\t\t\tcols='30'\n\t\t\t\t\t\t\t\t\t\t\trows='5'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='...'\n\t\t\t\t\t\t\t\t\t\t\tvalue={settingData.distributers}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetSettingData({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...settingData,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdistributers:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='threshold'>\n\t\t\t\t\t\t\t\t\t\t\tWhat <b>threshold</b> would you like\n\t\t\t\t\t\t\t\t\t\t\tto use to indicate when it's time to\n\t\t\t\t\t\t\t\t\t\t\treorder? (i.e. reorder when\n\t\t\t\t\t\t\t\t\t\t\tinventory for an item is 0.3 or\n\t\t\t\t\t\t\t\t\t\t\tless)\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclassName='threshold-input'\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\tname='threshold'\n\t\t\t\t\t\t\t\t\t\t\tid='settings-textarea'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='...'\n\t\t\t\t\t\t\t\t\t\t\tvalue={settingData.threshold}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetSettingData({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...settingData,\n\t\t\t\t\t\t\t\t\t\t\t\t\tthreshold: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t<label htmlFor='categories'>\n\t\t\t\t\t\t\t\t\t\t\tWhat <b>categories</b> would you\n\t\t\t\t\t\t\t\t\t\t\tlike to use to organize items for\n\t\t\t\t\t\t\t\t\t\t\tyour bar? List them separated by\n\t\t\t\t\t\t\t\t\t\t\tcommas.\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tname='categories'\n\t\t\t\t\t\t\t\t\t\t\tid='settings-textarea'\n\t\t\t\t\t\t\t\t\t\t\tcols='30'\n\t\t\t\t\t\t\t\t\t\t\trows='5'\n\t\t\t\t\t\t\t\t\t\t\tplaceholder='...'\n\t\t\t\t\t\t\t\t\t\t\tvalue={settingData.categories}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetSettingData({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...settingData,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcategories: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='settings-button'\n\t\t\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tSave Settings\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName='settings-button'\n\t\t\t\t\t\t\t\t\t\tid='clear-settings-btn-m'\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteSetting(settings[0]?._id),\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSettingData({});\n\t\t\t\t\t\t\t\t\t\t\t\t\talert('Settings cleared!');\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t.then(() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\twindow.location.reload(),\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tClear All Settings\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Loading />\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}