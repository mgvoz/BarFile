{"ast":null,"code":"import _slicedToArray from\"/Users/MarissaGvozdenovich/Desktop/BarFile/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import ReactExport from'react-export-excel';import Loading from'../Loading';import DashboardDesktop from'./DashboardDesktop';import DashboardMobile from'./DashboardMobile';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(){//set variables\nvar _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),width=_useState4[0],setWidth=_useState4[1];var user=JSON.parse(localStorage.getItem('profile'));var settings=useSelector(function(state){return state.settings.filter(function(s){var _user$result,_user$result2;return(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.googleId)===(s===null||s===void 0?void 0:s.creator)||(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2._id)===(s===null||s===void 0?void 0:s.creator);});});var items=useSelector(function(state){return state.items.filter(function(i){var _user$result3,_user$result4;return(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.googleId)===(i===null||i===void 0?void 0:i.creator)||(user===null||user===void 0?void 0:(_user$result4=user.result)===null||_user$result4===void 0?void 0:_user$result4._id)===(i===null||i===void 0?void 0:i.creator);});});//set loading screen\nuseEffect(function(){setTimeout(function(){return setLoading(false);},2000);setTimeout(function(){return setWidth(window.innerWidth);},2000);},[]);//sort items for 5 most recent\nvar sortedItems=items.slice().sort(function(a,b){return b.lastUpdated-a.lastUpdated;});var mostRecentItems=sortedItems.reverse().slice(0,5);//excel file export\nvar ExcelFile=ReactExport.ExcelFile;var ExcelSheet=ReactExport.ExcelFile.ExcelSheet;var ExcelColumn=ReactExport.ExcelFile.ExcelColumn;var date=new Date();var itemsBelowThreshold=items.filter(function(i){var _settings$;return i.quantityRemaining<parseFloat((_settings$=settings[0])===null||_settings$===void 0?void 0:_settings$.threshold);});var dataSet=[];var dataSet2=[];var createDataSet=function createDataSet(){items.forEach(function(i){return dataSet.push({item:i.nameOfItem,quantity:i.quantityRemaining,category:i.category,distributer:i.distributer});});itemsBelowThreshold.forEach(function(i){return dataSet2.push({item:i.nameOfItem,quantity:i.quantityRemaining,category:i.category,distributer:i.distributer});});};createDataSet();return/*#__PURE__*/_jsx(_Fragment,{children:loading===false?/*#__PURE__*/_jsx(_Fragment,{children:width>=1000?/*#__PURE__*/_jsx(DashboardDesktop,{settings:settings,items:items,mostRecentItems:mostRecentItems,dataSet:dataSet,dataSet2:dataSet2,date:date,ExcelColumn:ExcelColumn,ExcelFile:ExcelFile,ExcelSheet:ExcelSheet}):/*#__PURE__*/_jsx(DashboardMobile,{settings:settings,items:items,mostRecentItems:mostRecentItems,dataSet:dataSet,dataSet2:dataSet2,date:date,ExcelColumn:ExcelColumn,ExcelFile:ExcelFile,ExcelSheet:ExcelSheet})}):/*#__PURE__*/_jsx(Loading,{})});}export default Dashboard;","map":{"version":3,"sources":["/Users/MarissaGvozdenovich/Desktop/BarFile/client/src/components/Dashboard/Dashboard.js"],"names":["React","useState","useEffect","useSelector","ReactExport","Loading","DashboardDesktop","DashboardMobile","Dashboard","loading","setLoading","width","setWidth","user","JSON","parse","localStorage","getItem","settings","state","filter","s","result","googleId","creator","_id","items","i","setTimeout","window","innerWidth","sortedItems","slice","sort","a","b","lastUpdated","mostRecentItems","reverse","ExcelFile","ExcelSheet","ExcelColumn","date","Date","itemsBelowThreshold","quantityRemaining","parseFloat","threshold","dataSet","dataSet2","createDataSet","forEach","push","item","nameOfItem","quantity","category","distributer"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport ReactExport from 'react-export-excel';\nimport Loading from '../Loading';\nimport DashboardDesktop from './DashboardDesktop';\nimport DashboardMobile from './DashboardMobile';\n\nfunction Dashboard() {\n\t//set variables\n\tconst [loading, setLoading] = useState(true);\n\tconst [width, setWidth] = useState(0);\n\tconst user = JSON.parse(localStorage.getItem('profile'));\n\tconst settings = useSelector((state) =>\n\t\tstate.settings.filter(\n\t\t\t(s) =>\n\t\t\t\tuser?.result?.googleId === s?.creator ||\n\t\t\t\tuser?.result?._id === s?.creator,\n\t\t),\n\t);\n\tconst items = useSelector((state) =>\n\t\tstate.items.filter(\n\t\t\t(i) =>\n\t\t\t\tuser?.result?.googleId === i?.creator ||\n\t\t\t\tuser?.result?._id === i?.creator,\n\t\t),\n\t);\n\n\t//set loading screen\n\tuseEffect(() => {\n\t\tsetTimeout(() => setLoading(false), 2000);\n\t\tsetTimeout(() => setWidth(window.innerWidth), 2000);\n\t}, []);\n\n\t//sort items for 5 most recent\n\tconst sortedItems = items\n\t\t.slice()\n\t\t.sort((a, b) => b.lastUpdated - a.lastUpdated);\n\tconst mostRecentItems = sortedItems.reverse().slice(0, 5);\n\n\t//excel file export\n\tconst ExcelFile = ReactExport.ExcelFile;\n\tconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\n\tconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\n\tconst date = new Date();\n\tconst itemsBelowThreshold = items.filter(\n\t\t(i) => i.quantityRemaining < parseFloat(settings[0]?.threshold),\n\t);\n\tlet dataSet = [];\n\tlet dataSet2 = [];\n\n\tconst createDataSet = () => {\n\t\titems.forEach((i) =>\n\t\t\tdataSet.push({\n\t\t\t\titem: i.nameOfItem,\n\t\t\t\tquantity: i.quantityRemaining,\n\t\t\t\tcategory: i.category,\n\t\t\t\tdistributer: i.distributer,\n\t\t\t}),\n\t\t);\n\t\titemsBelowThreshold.forEach((i) =>\n\t\t\tdataSet2.push({\n\t\t\t\titem: i.nameOfItem,\n\t\t\t\tquantity: i.quantityRemaining,\n\t\t\t\tcategory: i.category,\n\t\t\t\tdistributer: i.distributer,\n\t\t\t}),\n\t\t);\n\t};\n\tcreateDataSet();\n\n\treturn (\n\t\t<>\n\t\t\t{loading === false ? (\n\t\t\t\t<>\n\t\t\t\t\t{width >= 1000 ? (\n\t\t\t\t\t\t<DashboardDesktop\n\t\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\tmostRecentItems={mostRecentItems}\n\t\t\t\t\t\t\tdataSet={dataSet}\n\t\t\t\t\t\t\tdataSet2={dataSet2}\n\t\t\t\t\t\t\tdate={date}\n\t\t\t\t\t\t\tExcelColumn={ExcelColumn}\n\t\t\t\t\t\t\tExcelFile={ExcelFile}\n\t\t\t\t\t\t\tExcelSheet={ExcelSheet}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<DashboardMobile\n\t\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\tmostRecentItems={mostRecentItems}\n\t\t\t\t\t\t\tdataSet={dataSet}\n\t\t\t\t\t\t\tdataSet2={dataSet2}\n\t\t\t\t\t\t\tdate={date}\n\t\t\t\t\t\t\tExcelColumn={ExcelColumn}\n\t\t\t\t\t\t\tExcelFile={ExcelFile}\n\t\t\t\t\t\t\tExcelSheet={ExcelSheet}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Loading />\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}