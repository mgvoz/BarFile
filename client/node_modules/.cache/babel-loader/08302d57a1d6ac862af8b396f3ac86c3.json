{"ast":null,"code":"import _objectSpread from\"/Users/MarissaGvozdenovich/Desktop/BarFile/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/MarissaGvozdenovich/Desktop/BarFile/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{saveItem,editItem}from'../../actions/inventory';import Loading from'../Loading';import InventoryDesktop from'./InventoryDesktop';import InventoryMobile from'./InventoryMobile';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Inventory(){var _user$result5,_user$result6,_user$result7,_settings$,_settings$$distribute,_settings$2,_settings$2$categorie;//set variables\nvar dispatch=useDispatch();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),width=_useState2[0],setWidth=_useState2[1];var user=JSON.parse(localStorage.getItem('profile'));var settings=useSelector(function(state){return state.settings.filter(function(s){var _user$result,_user$result2;return(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.googleId)===(s===null||s===void 0?void 0:s.creator)||(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2._id)===(s===null||s===void 0?void 0:s.creator);});});var items=useSelector(function(state){return state.items.filter(function(i){var _user$result3,_user$result4;return(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.googleId)===(i===null||i===void 0?void 0:i.creator)||(user===null||user===void 0?void 0:(_user$result4=user.result)===null||_user$result4===void 0?void 0:_user$result4._id)===(i===null||i===void 0?void 0:i.creator);});});var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),turnGreen=_useState6[0],setTurnGreen=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),sliderQuantity=_useState8[0],setSliderQuantity=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),bottleQuantity=_useState10[0],setBottleQuantity=_useState10[1];var _useState11=useState({nameOfUser:user===null||user===void 0?void 0:(_user$result5=user.result)===null||_user$result5===void 0?void 0:_user$result5.name,creator:(user===null||user===void 0?void 0:(_user$result6=user.result)===null||_user$result6===void 0?void 0:_user$result6.googleId)||(user===null||user===void 0?void 0:(_user$result7=user.result)===null||_user$result7===void 0?void 0:_user$result7._id),lastUpdated:new Date().toDateString(),quantityRemaining:0,category:'',distributer:'',nameOfItem:'',barcode:'',image:''}),_useState12=_slicedToArray(_useState11,2),itemData=_useState12[0],setItemData=_useState12[1];//set loading screen\nuseEffect(function(){setTimeout(function(){return setLoading(false);},2000);setTimeout(function(){return setWidth(window.innerWidth);},2000);},[]);//get individual distributers and categories for drop-down menu\nvar distributers=(_settings$=settings[0])===null||_settings$===void 0?void 0:(_settings$$distribute=_settings$.distributers[0])===null||_settings$$distribute===void 0?void 0:_settings$$distribute.split(', ');var categories=(_settings$2=settings[0])===null||_settings$2===void 0?void 0:(_settings$2$categorie=_settings$2.categories[0])===null||_settings$2$categorie===void 0?void 0:_settings$2$categorie.split(', ');//access camera on device and stream\nvar getVideoStream=function getVideoStream(){navigator.mediaDevices.getUserMedia({video:{facingMode:'environment'}}).then(function(stream){document.getElementById('video').srcObject=stream;}).catch(function(error){return console.log(error);});};//scan barcode from live camera stream\nvar code;var findBarcode=function findBarcode(){if(Boolean(window.BarcodeDetector)===true&&document.getElementById('video')){var barcodeDetector=new window.BarcodeDetector({formats:['ean_13','ean_8','upc_a','upc_e','code_128','code_39','code_93','codabar','itf']});barcodeDetector.detect(document.getElementById('video')).then(function(data){if(data.length===1){setTurnGreen('border: 2px solid green;');code=data[0].rawValue;apiLookup(code);}}).catch(function(e){console.log(e);});}};//api barcode lookup\nvar key='4d43fce807834d508faa6b95347a3055';var apiLookup=function apiLookup(code){var url='https://mgcorsproxy.herokuapp.com/https://api.apigenius.io/products/lookup?upc='+code+'&api_key='+key;fetch(url).then(function(res){if(!res.ok){console.log('failure');}return res.json();}).then(function(data){setItemData(_objectSpread(_objectSpread({},itemData),{},{nameOfItem:data.items.title,image:data.items.images[0],barcode:data.items.upc}));}).catch(function(err){return console.log(err);});};setInterval(findBarcode,4000);// submit form\nvar saveItemData=function saveItemData(e){e.preventDefault();if(items.length>0){var match=items.filter(function(item){return item.barcode===itemData.barcode;});if(match.length!==0){dispatch(editItem(match[0]._id,_objectSpread({},itemData)));alert('Item saved successfully.');window.location.reload();}else{dispatch(saveItem({itemData:itemData}));alert('Item saved successfully.');window.location.reload();}}else{dispatch(saveItem({itemData:itemData}));alert('Item saved successfully.');window.location.reload();}};return/*#__PURE__*/_jsx(_Fragment,{children:loading===false?/*#__PURE__*/_jsx(_Fragment,{children:width>=1000?/*#__PURE__*/_jsx(InventoryDesktop,{settings:settings,user:user,bottleQuantity:bottleQuantity,setBottleQuantity:setBottleQuantity,sliderQuantity:sliderQuantity,setSliderQuantity:setSliderQuantity,distributers:distributers,categories:categories,getVideoStream:getVideoStream,saveItemData:saveItemData,itemData:itemData,setItemData:setItemData,turnGreen:turnGreen}):/*#__PURE__*/_jsx(InventoryMobile,{settings:settings,user:user,bottleQuantity:bottleQuantity,setBottleQuantity:setBottleQuantity,sliderQuantity:sliderQuantity,setSliderQuantity:setSliderQuantity,distributers:distributers,categories:categories,getVideoStream:getVideoStream,saveItemData:saveItemData,itemData:itemData,setItemData:setItemData,turnGreen:turnGreen})}):/*#__PURE__*/_jsx(Loading,{})});}export default Inventory;","map":{"version":3,"sources":["/Users/MarissaGvozdenovich/Desktop/BarFile/client/src/components/Inventory/Inventory.js"],"names":["React","useState","useEffect","useDispatch","useSelector","saveItem","editItem","Loading","InventoryDesktop","InventoryMobile","Inventory","dispatch","width","setWidth","user","JSON","parse","localStorage","getItem","settings","state","filter","s","result","googleId","creator","_id","items","i","loading","setLoading","turnGreen","setTurnGreen","sliderQuantity","setSliderQuantity","bottleQuantity","setBottleQuantity","nameOfUser","name","lastUpdated","Date","toDateString","quantityRemaining","category","distributer","nameOfItem","barcode","image","itemData","setItemData","setTimeout","window","innerWidth","distributers","split","categories","getVideoStream","navigator","mediaDevices","getUserMedia","video","facingMode","then","stream","document","getElementById","srcObject","catch","error","console","log","code","findBarcode","Boolean","BarcodeDetector","barcodeDetector","formats","detect","data","length","rawValue","apiLookup","e","key","url","fetch","res","ok","json","title","images","upc","err","setInterval","saveItemData","preventDefault","match","item","alert","location","reload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { saveItem, editItem } from '../../actions/inventory';\nimport Loading from '../Loading';\nimport InventoryDesktop from './InventoryDesktop';\nimport InventoryMobile from './InventoryMobile';\n\nfunction Inventory() {\n\t//set variables\n\tconst dispatch = useDispatch();\n\tconst [width, setWidth] = useState(0);\n\tconst user = JSON.parse(localStorage.getItem('profile'));\n\tconst settings = useSelector((state) =>\n\t\tstate.settings.filter(\n\t\t\t(s) =>\n\t\t\t\tuser?.result?.googleId === s?.creator ||\n\t\t\t\tuser?.result?._id === s?.creator,\n\t\t),\n\t);\n\tconst items = useSelector((state) =>\n\t\tstate.items.filter(\n\t\t\t(i) =>\n\t\t\t\tuser?.result?.googleId === i?.creator ||\n\t\t\t\tuser?.result?._id === i?.creator,\n\t\t),\n\t);\n\tconst [loading, setLoading] = useState(true);\n\tconst [turnGreen, setTurnGreen] = useState('');\n\tconst [sliderQuantity, setSliderQuantity] = useState(0);\n\tconst [bottleQuantity, setBottleQuantity] = useState(0);\n\tconst [itemData, setItemData] = useState({\n\t\tnameOfUser: user?.result?.name,\n\t\tcreator: user?.result?.googleId || user?.result?._id,\n\t\tlastUpdated: new Date().toDateString(),\n\t\tquantityRemaining: 0,\n\t\tcategory: '',\n\t\tdistributer: '',\n\t\tnameOfItem: '',\n\t\tbarcode: '',\n\t\timage: '',\n\t});\n\n\t//set loading screen\n\tuseEffect(() => {\n\t\tsetTimeout(() => setLoading(false), 2000);\n\t\tsetTimeout(() => setWidth(window.innerWidth), 2000);\n\t}, []);\n\n\t//get individual distributers and categories for drop-down menu\n\tconst distributers = settings[0]?.distributers[0]?.split(', ');\n\tconst categories = settings[0]?.categories[0]?.split(', ');\n\n\t//access camera on device and stream\n\tconst getVideoStream = () => {\n\t\tnavigator.mediaDevices\n\t\t\t.getUserMedia({\n\t\t\t\tvideo: { facingMode: 'environment' },\n\t\t\t})\n\t\t\t.then((stream) => {\n\t\t\t\tdocument.getElementById('video').srcObject = stream;\n\t\t\t})\n\t\t\t.catch((error) => console.log(error));\n\t};\n\n\t//scan barcode from live camera stream\n\tlet code;\n\tconst findBarcode = () => {\n\t\tif (\n\t\t\tBoolean(window.BarcodeDetector) === true &&\n\t\t\tdocument.getElementById('video')\n\t\t) {\n\t\t\tvar barcodeDetector = new window.BarcodeDetector({\n\t\t\t\tformats: [\n\t\t\t\t\t'ean_13',\n\t\t\t\t\t'ean_8',\n\t\t\t\t\t'upc_a',\n\t\t\t\t\t'upc_e',\n\t\t\t\t\t'code_128',\n\t\t\t\t\t'code_39',\n\t\t\t\t\t'code_93',\n\t\t\t\t\t'codabar',\n\t\t\t\t\t'itf',\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tbarcodeDetector\n\t\t\t\t.detect(document.getElementById('video'))\n\t\t\t\t.then((data) => {\n\t\t\t\t\tif (data.length === 1) {\n\t\t\t\t\t\tsetTurnGreen('border: 2px solid green;');\n\t\t\t\t\t\tcode = data[0].rawValue;\n\t\t\t\t\t\tapiLookup(code);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tconsole.log(e);\n\t\t\t\t});\n\t\t}\n\t};\n\n\t//api barcode lookup\n\tlet key = '4d43fce807834d508faa6b95347a3055';\n\tconst apiLookup = (code) => {\n\t\tconst url =\n\t\t\t'https://mgcorsproxy.herokuapp.com/https://api.apigenius.io/products/lookup?upc=' +\n\t\t\tcode +\n\t\t\t'&api_key=' +\n\t\t\tkey;\n\t\tfetch(url)\n\t\t\t.then((res) => {\n\t\t\t\tif (!res.ok) {\n\t\t\t\t\tconsole.log('failure');\n\t\t\t\t}\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then((data) => {\n\t\t\t\tsetItemData({\n\t\t\t\t\t...itemData,\n\t\t\t\t\tnameOfItem: data.items.title,\n\t\t\t\t\timage: data.items.images[0],\n\t\t\t\t\tbarcode: data.items.upc,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t};\n\n\tsetInterval(findBarcode, 4000);\n\n\t// submit form\n\tconst saveItemData = (e) => {\n\t\te.preventDefault();\n\n\t\tif (items.length > 0) {\n\t\t\tconst match = items.filter(\n\t\t\t\t(item) => item.barcode === itemData.barcode,\n\t\t\t);\n\t\t\tif (match.length !== 0) {\n\t\t\t\tdispatch(editItem(match[0]._id, { ...itemData }));\n\t\t\t\talert('Item saved successfully.');\n\t\t\t\twindow.location.reload();\n\t\t\t} else {\n\t\t\t\tdispatch(saveItem({ itemData }));\n\t\t\t\talert('Item saved successfully.');\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t} else {\n\t\t\tdispatch(saveItem({ itemData }));\n\t\t\talert('Item saved successfully.');\n\t\t\twindow.location.reload();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{loading === false ? (\n\t\t\t\t<>\n\t\t\t\t\t{width >= 1000 ? (\n\t\t\t\t\t\t<InventoryDesktop\n\t\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\tbottleQuantity={bottleQuantity}\n\t\t\t\t\t\t\tsetBottleQuantity={setBottleQuantity}\n\t\t\t\t\t\t\tsliderQuantity={sliderQuantity}\n\t\t\t\t\t\t\tsetSliderQuantity={setSliderQuantity}\n\t\t\t\t\t\t\tdistributers={distributers}\n\t\t\t\t\t\t\tcategories={categories}\n\t\t\t\t\t\t\tgetVideoStream={getVideoStream}\n\t\t\t\t\t\t\tsaveItemData={saveItemData}\n\t\t\t\t\t\t\titemData={itemData}\n\t\t\t\t\t\t\tsetItemData={setItemData}\n\t\t\t\t\t\t\tturnGreen={turnGreen}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<InventoryMobile\n\t\t\t\t\t\t\tsettings={settings}\n\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\tbottleQuantity={bottleQuantity}\n\t\t\t\t\t\t\tsetBottleQuantity={setBottleQuantity}\n\t\t\t\t\t\t\tsliderQuantity={sliderQuantity}\n\t\t\t\t\t\t\tsetSliderQuantity={setSliderQuantity}\n\t\t\t\t\t\t\tdistributers={distributers}\n\t\t\t\t\t\t\tcategories={categories}\n\t\t\t\t\t\t\tgetVideoStream={getVideoStream}\n\t\t\t\t\t\t\tsaveItemData={saveItemData}\n\t\t\t\t\t\t\titemData={itemData}\n\t\t\t\t\t\t\tsetItemData={setItemData}\n\t\t\t\t\t\t\tturnGreen={turnGreen}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<Loading />\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Inventory;\n"]},"metadata":{},"sourceType":"module"}