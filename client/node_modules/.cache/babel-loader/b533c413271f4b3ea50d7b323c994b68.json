{"ast":null,"code":"import _slicedToArray from\"/Users/MarissaGvozdenovich/Desktop/BarFile/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import logo from'../images/logo.png';import mlogo from'../images/navlogo.png';import{Link,useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';import*as actionType from'../constants/actionTypes';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Navbar(){var _user$result,_user$result2;//set variables\nvar dispatch=useDispatch();var location=useLocation();var history=useHistory();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var w=window.innerWidth;//dispatch logout function for logout button\nvar logout=function logout(){dispatch({type:actionType.LOGOUT});alert('Logout successful');history.push('/');setUser(null);stopStream();};//get user info for navbar, set auto-logout\nuseEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);//stop stream when leaving inventory page or logging out\nvar stopStream=function stopStream(){if(document.getElementById('video')){var _document$getElementB;var stream=(_document$getElementB=document.getElementById('video'))===null||_document$getElementB===void 0?void 0:_document$getElementB.srcObject;var tracks=stream===null||stream===void 0?void 0:stream.getTracks();tracks===null||tracks===void 0?void 0:tracks.forEach(function(track){track.stop();});document.getElementById('video').srcObject=null;}return'';};return/*#__PURE__*/_jsx(_Fragment,{children:w>800?/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:logo,alt:\"BarFile logo\"})})}),/*#__PURE__*/_jsx(\"p\",{className:\"nav-name\",children:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"nav-line\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",id:\"nav-item\",className:\"nav-item nav-link\",onClick:stopStream,children:\"Dashboard\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/settings\",id:\"nav-item\",className:\"nav-item nav-link\",onClick:stopStream,children:\"Settings\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/inventory\",id:\"nav-item\",className:\"nav-item nav-link\",children:\"Take Inventory\"})})]}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",type:\"submit\",onClick:logout,children:\"Logout\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container-m\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:/*#__PURE__*/_jsx(\"img\",{className:\"mlogo\",src:mlogo,alt:\"BarFile logo\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"nav-name-m\",children:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarNavAltMarkup\",\"aria-controls\":\"navbarNavAltMarkup\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",children:/*#__PURE__*/_jsx(\"span\",{className:\"navbar-toggler-icon\",children:/*#__PURE__*/_jsx(\"i\",{id:\"nav-bars\",className:\"fas fa-bars\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarNavAltMarkup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav mr-auto\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",id:\"nav-item-m\",className:\"nav-item nav-link\",onClick:stopStream,children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/settings\",id:\"nav-item-m\",className:\"nav-item nav-link\",onClick:stopStream,children:\"Settings\"}),/*#__PURE__*/_jsx(Link,{to:\"/inventory\",id:\"nav-item-m\",className:\"nav-item nav-link\",children:\"Take Inventory\"})]}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"logout-button-m\",type:\"submit\",onClick:logout,children:\"Logout\"})}),/*#__PURE__*/_jsx(\"hr\",{className:\"nav-line\"})]})]})});}export default Navbar;","map":{"version":3,"sources":["/Users/MarissaGvozdenovich/Desktop/BarFile/client/src/components/Navbar.js"],"names":["React","useState","useEffect","logo","mlogo","Link","useHistory","useLocation","useDispatch","decode","actionType","Navbar","dispatch","location","history","JSON","parse","localStorage","getItem","user","setUser","w","window","innerWidth","logout","type","LOGOUT","alert","push","stopStream","token","decodedToken","exp","Date","getTime","document","getElementById","stream","srcObject","tracks","getTracks","forEach","track","stop","result","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport logo from '../images/logo.png';\nimport mlogo from '../images/navlogo.png';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport decode from 'jwt-decode';\nimport * as actionType from '../constants/actionTypes';\n\nfunction Navbar() {\n\t//set variables\n\tconst dispatch = useDispatch();\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst [user, setUser] = useState(\n\t\tJSON.parse(localStorage.getItem('profile')),\n\t);\n\tvar w = window.innerWidth;\n\n\t//dispatch logout function for logout button\n\tconst logout = () => {\n\t\tdispatch({ type: actionType.LOGOUT });\n\t\talert('Logout successful');\n\t\thistory.push('/');\n\t\tsetUser(null);\n\t\tstopStream();\n\t};\n\n\t//get user info for navbar, set auto-logout\n\tuseEffect(() => {\n\t\tconst token = user?.token;\n\t\tif (token) {\n\t\t\tconst decodedToken = decode(token);\n\n\t\t\tif (decodedToken.exp * 1000 < new Date().getTime()) logout();\n\t\t}\n\t\tsetUser(JSON.parse(localStorage.getItem('profile')));\n\t}, [location]);\n\n\t//stop stream when leaving inventory page or logging out\n\tconst stopStream = () => {\n\t\tif (document.getElementById('video')) {\n\t\t\tconst stream = document.getElementById('video')?.srcObject;\n\t\t\tconst tracks = stream?.getTracks();\n\t\t\ttracks?.forEach(function (track) {\n\t\t\t\ttrack.stop();\n\t\t\t});\n\t\t\tdocument.getElementById('video').srcObject = null;\n\t\t}\n\t\treturn '';\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{w > 800 ? (\n\t\t\t\t<div className='nav-container'>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<center>\n\t\t\t\t\t\t\t\t<a href='/dashboard'>\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tclassName='logo'\n\t\t\t\t\t\t\t\t\t\tsrc={logo}\n\t\t\t\t\t\t\t\t\t\talt='BarFile logo'\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</center>\n\t\t\t\t\t\t\t<p className='nav-name'>{user?.result?.name}</p>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<hr className='nav-line' />\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto='/dashboard'\n\t\t\t\t\t\t\t\tid='nav-item'\n\t\t\t\t\t\t\t\tclassName='nav-item nav-link'\n\t\t\t\t\t\t\t\tonClick={stopStream}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDashboard\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto='/settings'\n\t\t\t\t\t\t\t\tid='nav-item'\n\t\t\t\t\t\t\t\tclassName='nav-item nav-link'\n\t\t\t\t\t\t\t\tonClick={stopStream}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto='/inventory'\n\t\t\t\t\t\t\t\tid='nav-item'\n\t\t\t\t\t\t\t\tclassName='nav-item nav-link'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tTake Inventory\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<center>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='logout-button'\n\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\tonClick={logout}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</center>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<div className='nav-container-m'>\n\t\t\t\t\t<a href='/dashboard'>\n\t\t\t\t\t\t<img className='mlogo' src={mlogo} alt='BarFile logo' />\n\t\t\t\t\t</a>\n\t\t\t\t\t<p className='nav-name-m'>{user?.result?.name}</p>\n\t\t\t\t\t<center>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName='navbar-toggler'\n\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\tdata-toggle='collapse'\n\t\t\t\t\t\t\tdata-target='#navbarNavAltMarkup'\n\t\t\t\t\t\t\taria-controls='navbarNavAltMarkup'\n\t\t\t\t\t\t\taria-expanded='false'\n\t\t\t\t\t\t\taria-label='Toggle navigation'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className='navbar-toggler-icon'>\n\t\t\t\t\t\t\t\t<i id='nav-bars' className='fas fa-bars'></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</center>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName='collapse navbar-collapse'\n\t\t\t\t\t\tid='navbarNavAltMarkup'\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className='navbar-nav mr-auto'>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto='/dashboard'\n\t\t\t\t\t\t\t\tid='nav-item-m'\n\t\t\t\t\t\t\t\tclassName='nav-item nav-link'\n\t\t\t\t\t\t\t\tonClick={stopStream}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDashboard\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto='/settings'\n\t\t\t\t\t\t\t\tid='nav-item-m'\n\t\t\t\t\t\t\t\tclassName='nav-item nav-link'\n\t\t\t\t\t\t\t\tonClick={stopStream}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSettings\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto='/inventory'\n\t\t\t\t\t\t\t\tid='nav-item-m'\n\t\t\t\t\t\t\t\tclassName='nav-item nav-link'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tTake Inventory\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<center>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName='logout-button-m'\n\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\tonClick={logout}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</center>\n\t\t\t\t\t\t<hr className='nav-line' />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Navbar;\n"]},"metadata":{},"sourceType":"module"}