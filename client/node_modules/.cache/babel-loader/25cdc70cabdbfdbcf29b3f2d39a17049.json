{"ast":null,"code":"import _slicedToArray from\"/Users/MarissaGvozdenovich/Desktop/BarFile/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';import*as actionType from'../../constants/actionTypes';import NavbarDesktop from'./NavbarDesktop';import NavbarMobile from'./NavbarMobile';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Navbar(){//set variables\nvar dispatch=useDispatch();var location=useLocation();var history=useHistory();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];//dispatch logout function for logout button\nvar logout=function logout(){dispatch({type:actionType.LOGOUT});alert('Logout successful');history.push('/');setUser(null);stopStream();};//get user info for navbar, set auto-logout\nuseEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);//stop stream when leaving inventory page or logging out\nvar stopStream=function stopStream(){if(document.getElementById('video')){var _document$getElementB;var stream=(_document$getElementB=document.getElementById('video'))===null||_document$getElementB===void 0?void 0:_document$getElementB.srcObject;var tracks=stream===null||stream===void 0?void 0:stream.getTracks();tracks===null||tracks===void 0?void 0:tracks.forEach(function(track){track.stop();});document.getElementById('video').srcObject=null;}return'';};return/*#__PURE__*/_jsx(_Fragment,{children:window.innerWidth>=1000?/*#__PURE__*/_jsx(NavbarDesktop,{user:user,logout:logout,stopStream:stopStream}):/*#__PURE__*/_jsx(NavbarMobile,{user:user,logout:logout,stopStream:stopStream})});}export default Navbar;","map":{"version":3,"sources":["/Users/MarissaGvozdenovich/Desktop/BarFile/client/src/components/Navbar/Navbar.js"],"names":["React","useState","useEffect","useHistory","useLocation","useDispatch","decode","actionType","NavbarDesktop","NavbarMobile","Navbar","dispatch","location","history","JSON","parse","localStorage","getItem","user","setUser","logout","type","LOGOUT","alert","push","stopStream","token","decodedToken","exp","Date","getTime","document","getElementById","stream","srcObject","tracks","getTracks","forEach","track","stop","window","innerWidth"],"mappings":"oIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,YAAnB,CACA,MAAO,GAAKC,CAAAA,UAAZ,KAA4B,6BAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,C,gGAEA,QAASC,CAAAA,MAAT,EAAkB,CACjB;AACA,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,GAAMS,CAAAA,OAAO,CAAGV,UAAU,EAA1B,CACA,cAAwBF,QAAQ,CAC/Ba,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAD+B,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAIA;AACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACpBT,QAAQ,CAAC,CAAEU,IAAI,CAAEd,UAAU,CAACe,MAAnB,CAAD,CAAR,CACAC,KAAK,CAAC,mBAAD,CAAL,CACAV,OAAO,CAACW,IAAR,CAAa,GAAb,EACAL,OAAO,CAAC,IAAD,CAAP,CACAM,UAAU,GACV,CAND,CAQA;AACAvB,SAAS,CAAC,UAAM,CACf,GAAMwB,CAAAA,KAAK,CAAGR,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEQ,KAApB,CACA,GAAIA,KAAJ,CAAW,CACV,GAAMC,CAAAA,YAAY,CAAGrB,MAAM,CAACoB,KAAD,CAA3B,CAEA,GAAIC,YAAY,CAACC,GAAb,CAAmB,IAAnB,CAA0B,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAA9B,CAAoDV,MAAM,GAC1D,CACDD,OAAO,CAACL,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAAP,CACA,CARQ,CAQN,CAACL,QAAD,CARM,CAAT,CAUA;AACA,GAAMa,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACxB,GAAIM,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAJ,CAAsC,2BACrC,GAAMC,CAAAA,MAAM,wBAAGF,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAH,gDAAG,sBAAkCE,SAAjD,CACA,GAAMC,CAAAA,MAAM,CAAGF,MAAH,SAAGA,MAAH,iBAAGA,MAAM,CAAEG,SAAR,EAAf,CACAD,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAEE,OAAR,CAAgB,SAAUC,KAAV,CAAiB,CAChCA,KAAK,CAACC,IAAN,GACA,CAFD,EAGAR,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCE,SAAjC,CAA6C,IAA7C,CACA,CACD,MAAO,EAAP,CACA,CAVD,CAYA,mBACC,yBACEM,MAAM,CAACC,UAAP,EAAqB,IAArB,cACA,KAAC,aAAD,EACC,IAAI,CAAEvB,IADP,CAEC,MAAM,CAAEE,MAFT,CAGC,UAAU,CAAEK,UAHb,EADA,cAOA,KAAC,YAAD,EACC,IAAI,CAAEP,IADP,CAEC,MAAM,CAAEE,MAFT,CAGC,UAAU,CAAEK,UAHb,EARF,EADD,CAiBA,CAED,cAAef,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport decode from 'jwt-decode';\nimport * as actionType from '../../constants/actionTypes';\nimport NavbarDesktop from './NavbarDesktop';\nimport NavbarMobile from './NavbarMobile';\n\nfunction Navbar() {\n\t//set variables\n\tconst dispatch = useDispatch();\n\tconst location = useLocation();\n\tconst history = useHistory();\n\tconst [user, setUser] = useState(\n\t\tJSON.parse(localStorage.getItem('profile')),\n\t);\n\n\t//dispatch logout function for logout button\n\tconst logout = () => {\n\t\tdispatch({ type: actionType.LOGOUT });\n\t\talert('Logout successful');\n\t\thistory.push('/');\n\t\tsetUser(null);\n\t\tstopStream();\n\t};\n\n\t//get user info for navbar, set auto-logout\n\tuseEffect(() => {\n\t\tconst token = user?.token;\n\t\tif (token) {\n\t\t\tconst decodedToken = decode(token);\n\n\t\t\tif (decodedToken.exp * 1000 < new Date().getTime()) logout();\n\t\t}\n\t\tsetUser(JSON.parse(localStorage.getItem('profile')));\n\t}, [location]);\n\n\t//stop stream when leaving inventory page or logging out\n\tconst stopStream = () => {\n\t\tif (document.getElementById('video')) {\n\t\t\tconst stream = document.getElementById('video')?.srcObject;\n\t\t\tconst tracks = stream?.getTracks();\n\t\t\ttracks?.forEach(function (track) {\n\t\t\t\ttrack.stop();\n\t\t\t});\n\t\t\tdocument.getElementById('video').srcObject = null;\n\t\t}\n\t\treturn '';\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{window.innerWidth >= 1000 ? (\n\t\t\t\t<NavbarDesktop\n\t\t\t\t\tuser={user}\n\t\t\t\t\tlogout={logout}\n\t\t\t\t\tstopStream={stopStream}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<NavbarMobile\n\t\t\t\t\tuser={user}\n\t\t\t\t\tlogout={logout}\n\t\t\t\t\tstopStream={stopStream}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default Navbar;\n"]},"metadata":{},"sourceType":"module"}